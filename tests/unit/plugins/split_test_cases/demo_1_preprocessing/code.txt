import pandas as pd
training_data = pd.read_csv("data/ames_train_cleaned.csv")
cleaned_data = training_data.drop(['Pool_QC', 'Misc_Feature'], axis=1)
cleaned_data = cleaned_data[cleaned_data['Gr_Liv_Area']  < 3000]
cleaned_data = cleaned_data[cleaned_data['Garage_Area']  < 1250]
from sklearn.feature_extraction import DictVectorizer
vec_enc = DictVectorizer()
vec_enc.fit(cleaned_data[['Neighborhood']].to_dict(orient='records'))
Neighborhood_data = vec_enc.transform(cleaned_data[['Neighborhood']].to_dict(orient='records')).toarray()
Neighborhood_cats = vec_enc.get_feature_names()
Neighborhood = pd.DataFrame(Neighborhood_data, columns=Neighborhood_cats)
Neighborhood = Neighborhood.drop(['Neighborhood=GrnHill', 'Neighborhood=Landmrk'], axis=1, errors='ignore')
cleaned_data = pd.concat([cleaned_data, Neighborhood], axis=1)
cleaned_data = cleaned_data.drop(columns=Neighborhood_cats[0])
cleaned_data.filter(
    regex="Neighborhood=.|Gr_Liv_Area|Garage_Area|SalePrice"
).to_csv("outputs/cleaned_data_housing.csv", index=False)